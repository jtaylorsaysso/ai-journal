<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="A private, encrypted journaling app for mental health support">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>AI Journal</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icons/icon.svg">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div id="app">
        <!-- Authentication View -->
        <section id="view-auth" class="view auth-view">
            <div class="auth-container">
                <div class="auth-header">
                    <span class="app-icon-large">ğŸŒ™</span>
                    <h1>AI Journal</h1>
                    <p class="auth-subtitle">Your private, encrypted journaling space</p>
                </div>

                <div class="auth-forms">
                    <!-- Login Form -->
                    <div id="login-form" class="auth-form active">
                        <h2>Welcome Back</h2>
                        <div class="form-group">
                            <label for="login-username">Username</label>
                            <input type="text" id="login-username" autocomplete="username" required>
                        </div>
                        <div class="form-group">
                            <label for="login-pin">PIN</label>
                            <input type="tel" id="login-pin" pattern="[0-9]{4,6}" maxlength="6" autocomplete="off"
                                inputmode="numeric" required>
                            <small>4-6 digits</small>
                        </div>
                        <div id="login-error" class="error-message hidden"></div>
                        <button id="btn-login" class="btn btn-primary full-width">Login</button>
                        <p class="auth-switch">
                            Don't have an account?
                            <a href="#" id="show-register">Create one</a>
                        </p>
                    </div>

                    <!-- Register Form -->
                    <div id="register-form" class="auth-form hidden">
                        <h2>Create Account</h2>
                        <div class="form-group">
                            <label for="register-username">Username</label>
                            <input type="text" id="register-username" autocomplete="username" required>
                            <small>3-20 characters, alphanumeric</small>
                        </div>
                        <div class="form-group">
                            <label for="register-pin">PIN</label>
                            <input type="tel" id="register-pin" pattern="[0-9]{4,6}" maxlength="6" autocomplete="off"
                                inputmode="numeric" required>
                            <small>4-6 digits</small>
                        </div>
                        <div class="form-group">
                            <label for="register-pin-confirm">Confirm PIN</label>
                            <input type="tel" id="register-pin-confirm" pattern="[0-9]{4,6}" maxlength="6"
                                autocomplete="off" inputmode="numeric" required>
                        </div>
                        <div id="register-error" class="error-message hidden"></div>
                        <button id="btn-register" class="btn btn-primary full-width">Create Account</button>
                        <p class="auth-switch">
                            Already have an account?
                            <a href="#" id="show-login">Login</a>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Header -->
        <header class="app-header hidden">
            <div class="header-left">
                <span class="app-icon">ğŸŒ™</span>
                <h1 class="app-title">AI Journal</h1>
            </div>
            <nav class="header-nav">
                <button id="btn-new-entry" class="nav-btn" aria-label="New Entry">
                    <span class="icon">âœï¸</span>
                </button>
                <button id="btn-settings" class="nav-btn" aria-label="Settings">
                    <span class="icon">âš™ï¸</span>
                </button>
                <button id="btn-logout" class="nav-btn" aria-label="Logout">
                    <span class="icon">ğŸšª</span>
                </button>
            </nav>
        </header>

        <!-- Main Content Area -->
        <main id="main-content" class="hidden">
            <!-- Entry List View (default) -->
            <section id="view-list" class="view active">
                <div class="search-bar">
                    <input type="search" id="search-input" placeholder="Search entries..." aria-label="Search entries">
                </div>
                <div id="entry-list" class="entry-list">
                    <!-- Entries populated by JS -->
                </div>
                <div id="empty-state" class="empty-state hidden">
                    <p class="empty-icon">ğŸ“</p>
                    <p class="empty-text">No entries yet</p>
                    <p class="empty-hint">Tap the âœï¸ button to start journaling</p>
                </div>
            </section>

            <!-- Entry Editor View -->
            <section id="view-editor" class="view hidden">
                <div class="mood-selector">
                    <p class="mood-label">How are you feeling?</p>
                    <div class="mood-options" role="radiogroup" aria-label="Mood selection">
                        <button class="mood-btn" data-mood="1" aria-label="Very bad">ğŸ˜¢</button>
                        <button class="mood-btn" data-mood="2" aria-label="Bad">ğŸ˜•</button>
                        <button class="mood-btn" data-mood="3" aria-label="Neutral">ğŸ˜</button>
                        <button class="mood-btn" data-mood="4" aria-label="Good">ğŸ™‚</button>
                        <button class="mood-btn" data-mood="5" aria-label="Very good">ğŸ˜Š</button>
                    </div>
                    <button class="mood-dismiss" aria-label="Dismiss mood selector">Skip</button>
                </div>
                <div class="editor-container">
                    <textarea id="entry-textarea" placeholder="Write your thoughts..."
                        aria-label="Journal entry"></textarea>
                </div>
                <div class="editor-footer">
                    <span id="word-count" class="word-count">0 words</span>
                    <div class="editor-actions">
                        <button id="btn-cancel" class="btn btn-secondary">Cancel</button>
                        <button id="btn-save" class="btn btn-primary">Save âœ“</button>
                    </div>
                </div>
            </section>

            <!-- Entry Detail View -->
            <section id="view-detail" class="view hidden">
                <div class="detail-header">
                    <button id="btn-back" class="nav-btn" aria-label="Back">â†</button>
                    <div class="detail-meta">
                        <span id="detail-date" class="detail-date"></span>
                        <span id="detail-mood" class="detail-mood"></span>
                    </div>
                    <div class="detail-actions">
                        <button id="btn-edit" class="nav-btn" aria-label="Edit">âœï¸</button>
                        <button id="btn-delete" class="nav-btn danger" aria-label="Delete">ğŸ—‘ï¸</button>
                    </div>
                </div>
                <div id="detail-content" class="detail-content"></div>
            </section>

            <!-- Settings View -->
            <section id="view-settings" class="view hidden">
                <div class="settings-header">
                    <button id="btn-settings-back" class="nav-btn" aria-label="Back">â†</button>
                    <h2>Settings</h2>
                </div>
                <div class="settings-list">
                    <div class="setting-item">
                        <label for="toggle-autosave">Auto-save entries</label>
                        <input type="checkbox" id="toggle-autosave" class="toggle">
                    </div>
                    <div class="setting-item">
                        <label for="toggle-theme">Dark mode</label>
                        <input type="checkbox" id="toggle-theme" class="toggle" checked>
                    </div>
                    <hr class="setting-divider">
                    <div class="setting-item">
                        <button id="btn-export-json" class="btn btn-secondary full-width">
                            Export as JSON
                        </button>
                    </div>
                    <div class="setting-item">
                        <button id="btn-export-text" class="btn btn-secondary full-width">
                            Export as Text
                        </button>
                    </div>
                    <hr class="setting-divider">
                    <div class="setting-item danger-zone">
                        <button id="btn-delete-all" class="btn btn-danger full-width">
                            Delete All Data
                        </button>
                        <p class="setting-warning">This cannot be undone</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Offline Indicator -->
        <div id="offline-banner" class="offline-banner hidden">
            <span>ğŸ“´ Offline - entries saved locally</span>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
</body>

</html>